---
// SpotlightCards Component - Cards con efecto spotlight hover

// CONFIGURACIÓN DEL SHOWCASE
// Aquí defines el color de fondo del contenedor para este componente
export const showcaseConfig = {
  backgroundColor: '#000000', // Color de fondo en formato hexadecimal
  
  // Si quieres usar una imagen en lugar de color, comenta backgroundColor y descomenta backgroundImage:
  // backgroundImage: '/ruta/a/tu/imagen.jpg',
  
  // Solo usa uno de los dos: backgroundColor O backgroundImage, no ambos
};
---

<div 
  class="featureCards-wrapper"
  style="
    max-width: {showcaseConfig.maxWidth};
    margin: 0 auto;
    padding: {showcaseConfig.padding};
    border-radius: {showcaseConfig.borderRadius};
    background: {showcaseConfig.backgroundColor};
  "
>
  <div class="featureCards-container">
    <ul class="featureCards-grid" id="featureCards-grid">
      <li>
        <article>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9.813 15.904L9 18.75l-.813-2.846a4.5 4.5 0 00-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 003.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 003.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 00-3.09 3.09zM18.259 8.715L18 9.75l-.259-1.035a3.375 3.375 0 00-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 002.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 002.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 00-2.456 2.456zM16.894 20.567L16.5 21.75l-.394-1.183a2.25 2.25 0 00-1.423-1.423L13.5 18.75l1.183-.394a2.25 2.25 0 001.423-1.423l.394-1.183.394 1.183a2.25 2.25 0 001.423 1.423l1.183.394-1.183.394a2.25 2.25 0 00-1.423 1.423z" />
          </svg>
          <h3>Design</h3>
          <p>
            Focus on shaping your ideas with intention. Small details, natural motions, and thoughtful interactions can make your interface feel much more refined.
          </p>
        </article>
      </li>

      <li>
        <article>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M17.25 6.75L22.5 12l-5.25 5.25m-10.5 0L1.5 12l5.25-5.25m7.5-3l-4.5 16.5" />
          </svg>
          <h3>Build</h3>
          <p>
            Keep your code organized and simple. Building with clarity from the start makes it easier to expand your project without unnecessary complications.
          </p>
        </article>
      </li>

      <li>
        <article>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 13.5l10.5-11.25L12 10.5h8.25L9.75 21.75 12 13.5H3.75z" />
          </svg>
          <h3>Deploy</h3>
          <p>
            Don't wait for perfection before shipping. Release early, gather feedback, and iterate. A smooth deployment routine helps you improve faster without fear.
          </p>
        </article>
      </li>

      <li>
        <article>
          <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" d="M9 12.75L11.25 15 15 9.75M21 12c0 1.268-.63 2.39-1.593 3.068a3.745 3.745 0 01-1.043 3.296 3.745 3.745 0 01-3.296 1.043A3.745 3.745 0 0112 21c-1.268 0-2.39-.63-3.068-1.593a3.746 3.746 0 01-3.296-1.043 3.745 3.745 0 01-1.043-3.296A3.745 3.745 0 013 12c0-1.268.63-2.39 1.593-3.068a3.745 3.745 0 011.043-3.296 3.746 3.746 0 013.296-1.043A3.746 3.746 0 0112 3c1.268 0 2.39.63 3.068 1.593a3.746 3.746 0 013.296 1.043 3.746 3.746 0 011.043 3.296A3.745 3.745 0 0121 12z" />
          </svg>
          <h3>Scale</h3>
          <p>
            Build with the future in mind. Strong foundations today will make it easier to handle more users, more features, and more complexity without performance issues.
          </p>
        </article>
      </li>
    </ul>
  </div>
</div>



<style>
  .featureCards-container {
    width: 100%;
    max-width: 65ch;
    position: relative;
  }

  .featureCards-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    list-style-type: none;
    padding: 0;
    margin: 0;
    position: relative;
  }

  .featureCards-grid li {
    padding: 1rem;
    list-style-type: none;
  }

  /* Spotlight effect background */
  .featureCards-grid::after {
    content: "";
    position: absolute;
    background: hsl(0 0% 10%);
    border-radius: 1rem;
    pointer-events: none;
    z-index: 0;
    inset:
      calc(var(--top) * 1px)
      calc(100% - (var(--right) * 1px))
      calc(100% - (var(--bottom) * 1px))
      calc(var(--left) * 1px);
    transition: inset 0.2s;
    opacity: 0;
  }

  .featureCards-grid[data-active]::after {
    opacity: 1;
    transition: opacity 0.2s 0.2s, inset 0.2s;
  }

  /* Article card styles */
  article {
    color: hsl(0 0% 80%);
    padding: 1rem;
    display: grid;
    gap: 0.5rem;
    position: relative;
    z-index: 1;
  }

  /* Grid pattern overlay */
  article::before {
    content: "";
    position: absolute;
    inset: 0;
    background:
      linear-gradient(hsl(0 0% 2%) 0 2px, transparent 2px 38px) -20px -20px / 40px 40px,
      linear-gradient(90deg, hsl(0 0% 2%) 0 2px, transparent 2px 38px) -20px -20px / 40px 40px;
    mask: linear-gradient(-35deg, hsl(0 0% 2%) 0%, transparent 45%);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
  }

  .featureCards-grid li:hover article::before {
    opacity: 1;
  }

  /* Clase para activar el efecto en móvil con click */
  .featureCards-grid li.active article::before {
    opacity: 1;
  }

  article h3 {
    margin: 0;
    font-weight: 400;
    font-size: 1.25rem;
  }

  article p {
    margin: 0;
    text-wrap: pretty;
    background: linear-gradient(hsl(0 0% 80%), hsl(0 0% 50%));
    color: transparent;
    background-clip: text;
    -webkit-background-clip: text;
    font-weight: 300;
    font-size: 0.95rem;
    line-height: 1.5;
  }

  article svg {
    width: 44px;
    height: 44px;
  }

  article svg path {
    stroke-width: 0.75;
    stroke: hsl(var(--hue, 30) calc(var(--active, 0) * 60%) 60%);
    transition: stroke 0.2s;
  }

  .featureCards-grid li:hover article svg path {
    --active: 1;
  }

  /* Clase para activar el efecto en móvil con click */
  .featureCards-grid li.active article svg path {
    --active: 1;
  }

  /* Individual card colors */
  .featureCards-grid li:nth-of-type(1) { --hue: 30; }
  .featureCards-grid li:nth-of-type(2) { --hue: 280; }
  .featureCards-grid li:nth-of-type(3) { --hue: 210; }
  .featureCards-grid li:nth-of-type(4) { --hue: 120; }

  /* Responsive */
  @media (max-width: 640px) {
    .featureCards-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  const grid = document.getElementById('featureCards-grid');
  if (grid) {
    let current: HTMLElement | null = null;
    const isTouchDevice = 'ontouchstart' in window || navigator.maxTouchPoints > 0;

    const sync = () => {
      if (current) {
        const bounds = current.getBoundingClientRect();
        const gridBounds = grid.getBoundingClientRect();
        
        grid.style.setProperty('--top', String(bounds.top - gridBounds.top));
        grid.style.setProperty('--right', String(bounds.right - gridBounds.left));
        grid.style.setProperty('--bottom', String(bounds.bottom - gridBounds.top));
        grid.style.setProperty('--left', String(bounds.left - gridBounds.left));
      }
    };

    const update = (e: PointerEvent) => {
      const target = document.elementFromPoint(e.clientX, e.clientY);
      const article = target?.closest('li')?.querySelector('article') as HTMLElement;
      
      if (article && article !== current) {
        current = article;
        grid.setAttribute('data-active', '');
        sync();
      }
    };

    const handleLeave = () => {
      current = null;
      grid.removeAttribute('data-active');
    };

    // Para dispositivos táctiles (móvil)
    if (isTouchDevice) {
      const articles = grid.querySelectorAll('li');
      
      articles.forEach((li) => {
        li.addEventListener('click', (e) => {
          e.preventDefault();
          const article = li.querySelector('article') as HTMLElement;
          
          if (li.classList.contains('active')) {
            // Si ya está activo, desactivar
            li.classList.remove('active');
            current = null;
            grid.removeAttribute('data-active');
          } else {
            // Desactivar todos los demás
            articles.forEach(otherLi => otherLi.classList.remove('active'));
            
            // Activar el nuevo
            li.classList.add('active');
            current = article;
            grid.setAttribute('data-active', '');
            sync();
          }
        });
      });

      // Cerrar al hacer click fuera
      document.addEventListener('click', (e) => {
        if (!grid.contains(e.target as Node)) {
          articles.forEach(li => li.classList.remove('active'));
          current = null;
          grid.removeAttribute('data-active');
        }
      });
    } else {
      // Para dispositivos con mouse (desktop)
      grid.addEventListener('pointermove', update);
      grid.addEventListener('pointerleave', handleLeave);
    }

    window.addEventListener('resize', sync);
  }
</script>