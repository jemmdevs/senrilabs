---
// SpotlightCards Component - Cards con efecto spotlight hover
---

<div class="spotlight-container">
  <ul class="spotlight-grid" id="spotlight-grid">
    <li>
      <article>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M6.75 7.5l3 2.25-3 2.25m4.5 0h3m-9 8.25h13.5A2.25 2.25 0 0021 18V6a2.25 2.25 0 00-2.25-2.25H5.25A2.25 2.25 0 003 6v12a2.25 2.25 0 002.25 2.25z" />
        </svg>
        <h3>Develop.</h3>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima alias fuga et ab magnam aliquam commodi ratione vel fugit nesciunt voluptatibus.
        </p>
      </article>
    </li>
    <li>
      <article>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M3.375 19.5h17.25m-17.25 0a1.125 1.125 0 01-1.125-1.125M3.375 19.5h1.5C5.496 19.5 6 18.996 6 18.375m-3.75 0V5.625m0 12.75v-1.5c0-.621.504-1.125 1.125-1.125m18.375 2.625V5.625m0 12.75c0 .621-.504 1.125-1.125 1.125m1.125-1.125v-1.5c0-.621-.504-1.125-1.125-1.125m0 3.75h-1.5A1.125 1.125 0 0118 18.375M20.625 4.5H3.375m17.25 0c.621 0 1.125.504 1.125 1.125M20.625 4.5h-1.5C18.504 4.5 18 5.004 18 5.625m3.75 0v1.5c0 .621-.504 1.125-1.125 1.125M3.375 4.5c-.621 0-1.125.504-1.125 1.125M3.375 4.5h1.5C5.496 4.5 6 5.004 6 5.625m-3.75 0v1.5c0 .621.504 1.125 1.125 1.125m0 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125m1.5-3.75C5.496 8.25 6 7.746 6 7.125v-1.5M4.875 8.25C5.496 8.25 6 8.754 6 9.375v1.5m0-5.25v5.25m0-5.25C6 5.004 6.504 4.5 7.125 4.5h9.75c.621 0 1.125.504 1.125 1.125m1.125 2.625h1.5m-1.5 0A1.125 1.125 0 0118 7.125v-1.5m1.125 2.625c-.621 0-1.125.504-1.125 1.125v1.5m2.625-2.625c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125M18 5.625v5.25M7.125 12h9.75m-9.75 0A1.125 1.125 0 016 10.875M7.125 12C6.504 12 6 12.504 6 13.125m0-2.25C6 11.496 5.496 12 4.875 12M18 10.875c0 .621-.504 1.125-1.125 1.125M18 10.875c0 .621.504 1.125 1.125 1.125m-2.25 0c.621 0 1.125.504 1.125 1.125m-12 5.25v-5.25m0 5.25c0 .621.504 1.125 1.125 1.125h9.75c.621 0 1.125-.504 1.125-1.125m-12 0v-1.5c0-.621-.504-1.125-1.125-1.125M18 18.375v-5.25m0 5.25v-1.5c0-.621.504-1.125 1.125-1.125M18 13.125v1.5c0 .621.504 1.125 1.125 1.125M18 13.125c0-.621.504-1.125 1.125-1.125M6 13.125v1.5c0 .621-.504 1.125-1.125 1.125M6 13.125C6 12.504 5.496 12 4.875 12m-1.5 0h1.5m-1.5 0c-.621 0-1.125.504-1.125 1.125v1.5c0 .621.504 1.125 1.125 1.125M19.125 12h1.5m0 0c.621 0 1.125.504 1.125 1.125v1.5c0 .621-.504 1.125-1.125 1.125m-17.25 0h1.5m14.25 0h1.5" />
        </svg>
        <h3>Preview.</h3>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima alias fuga et ab magnam aliquam commodi ratione vel fugit nesciunt voluptatibus.
        </p>
      </article>
    </li>
    <li>
      <article>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M12 21a9.004 9.004 0 008.716-6.747M12 21a9.004 9.004 0 01-8.716-6.747M12 21c2.485 0 4.5-4.03 4.5-9S14.485 3 12 3m0 18c-2.485 0-4.5-4.03-4.5-9S9.515 3 12 3m0 0a8.997 8.997 0 017.843 4.582M12 3a8.997 8.997 0 00-7.843 4.582m15.686 0A11.953 11.953 0 0112 10.5c-2.998 0-5.74-1.1-7.843-2.918m15.686 0A8.959 8.959 0 0121 12c0 .778-.099 1.533-.284 2.253m0 0A17.919 17.919 0 0112 16.5c-3.162 0-6.133-.815-8.716-2.247m0 0A9.015 9.015 0 013 12c0-1.605.42-3.113 1.157-4.418" />
        </svg>
        <h3>Ship.</h3>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima alias fuga et ab magnam aliquam commodi ratione vel fugit nesciunt voluptatibus.
        </p>
      </article>
    </li>
    <li>
      <article>
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" d="M2.25 18.75a60.07 60.07 0 0115.797 2.101c.727.198 1.453-.342 1.453-1.096V18.75M3.75 4.5v.75A.75.75 0 013 6h-.75m0 0v-.375c0-.621.504-1.125 1.125-1.125H20.25M2.25 6v9m18-10.5v.75c0 .414.336.75.75.75h.75m-1.5-1.5h.375c.621 0 1.125.504 1.125 1.125v9.75c0 .621-.504 1.125-1.125 1.125h-.375m1.5-1.5H21a.75.75 0 00-.75.75v.75m0 0H3.75m0 0h-.375a1.125 1.125 0 01-1.125-1.125V15m1.5 1.5v-.75A.75.75 0 003 15h-.75M15 10.5a3 3 0 11-6 0 3 3 0 016 0zm3 0h.008v.008H18V10.5zm-12 0h.008v.008H6V10.5z" />
        </svg>
        <h3>Profit.</h3>
        <p>
          Lorem ipsum dolor sit amet consectetur adipisicing elit. Minima alias fuga et ab magnam aliquam commodi ratione vel fugit nesciunt voluptatibus.
        </p>
      </article>
    </li>
  </ul>
</div>

<style>
  .spotlight-container {
    width: 100%;
    max-width: 60ch;
    position: relative;
  }

  .spotlight-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    list-style-type: none;
    padding: 0;
    margin: 0;
    position: relative;
  }

  .spotlight-grid li {
    padding: 1rem;
    list-style-type: none;
  }

  /* Spotlight effect background */
  .spotlight-grid::after {
    content: "";
    position: absolute;
    background: hsl(0 0% 10%);
    border-radius: 1rem;
    pointer-events: none;
    z-index: 0;
    inset:
      calc(var(--top) * 1px)
      calc(100% - (var(--right) * 1px))
      calc(100% - (var(--bottom) * 1px))
      calc(var(--left) * 1px);
    transition: inset 0.2s;
    opacity: 0;
  }

  .spotlight-grid[data-active]::after {
    opacity: 1;
    transition: opacity 0.2s 0.2s, inset 0.2s;
  }

  /* Article card styles */
  article {
    color: hsl(0 0% 80%);
    padding: 1rem;
    display: grid;
    gap: 0.5rem;
    position: relative;
    z-index: 1;
  }

  /* Grid pattern overlay */
  article::before {
    content: "";
    position: absolute;
    inset: 0;
    background:
      linear-gradient(hsl(0 0% 2%) 0 2px, transparent 2px 38px) -20px -20px / 40px 40px,
      linear-gradient(90deg, hsl(0 0% 2%) 0 2px, transparent 2px 38px) -20px -20px / 40px 40px;
    mask: linear-gradient(-35deg, hsl(0 0% 2%) 0%, transparent 45%);
    z-index: -1;
    opacity: 0;
    transition: opacity 0.2s;
    pointer-events: none;
  }

  .spotlight-grid li:hover article::before {
    opacity: 1;
  }

  article h3 {
    margin: 0;
    font-weight: 400;
    font-size: 1.25rem;
  }

  article p {
    margin: 0;
    text-wrap: pretty;
    background: linear-gradient(hsl(0 0% 80%), hsl(0 0% 50%));
    color: transparent;
    background-clip: text;
    -webkit-background-clip: text;
    font-weight: 300;
    font-size: 0.95rem;
    line-height: 1.5;
  }

  article svg {
    width: 44px;
    height: 44px;
  }

  article svg path {
    stroke-width: 0.75;
    stroke: hsl(var(--hue, 30) calc(var(--active, 0) * 60%) 60%);
    transition: stroke 0.2s;
  }

  .spotlight-grid li:hover article svg path {
    --active: 1;
  }

  /* Individual card colors */
  .spotlight-grid li:nth-of-type(1) { --hue: 30; }
  .spotlight-grid li:nth-of-type(2) { --hue: 280; }
  .spotlight-grid li:nth-of-type(3) { --hue: 210; }
  .spotlight-grid li:nth-of-type(4) { --hue: 120; }

  /* Responsive */
  @media (max-width: 640px) {
    .spotlight-grid {
      grid-template-columns: 1fr;
    }
  }
</style>

<script>
  const grid = document.getElementById('spotlight-grid');
  if (grid) {
    let current: HTMLElement | null = null;

    const sync = () => {
      if (current) {
        const bounds = current.getBoundingClientRect();
        const gridBounds = grid.getBoundingClientRect();
        
        grid.style.setProperty('--top', String(bounds.top - gridBounds.top));
        grid.style.setProperty('--right', String(bounds.right - gridBounds.left));
        grid.style.setProperty('--bottom', String(bounds.bottom - gridBounds.top));
        grid.style.setProperty('--left', String(bounds.left - gridBounds.left));
      }
    };

    const update = (e: PointerEvent) => {
      const target = document.elementFromPoint(e.clientX, e.clientY);
      const article = target?.closest('li')?.querySelector('article') as HTMLElement;
      
      if (article && article !== current) {
        current = article;
        grid.setAttribute('data-active', '');
        sync();
      }
    };

    const handleLeave = () => {
      current = null;
      grid.removeAttribute('data-active');
    };

    grid.addEventListener('pointermove', update);
    grid.addEventListener('pointerleave', handleLeave);
    window.addEventListener('resize', sync);
  }
</script>